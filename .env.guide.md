# .env Configuration Guide

## Quick Start (Minimal Setup)

For local development and testing, you only need PostgreSQL. The AWS credentials can be placeholders:

```bash
# PostgreSQL - Use these defaults (they match docker-compose.yml)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=documents_db
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# AWS - Can use placeholders for now if not using S3
AWS_ACCESS_KEY_ID=not_needed_for_local_testing
AWS_SECRET_ACCESS_KEY=not_needed_for_local_testing
AWS_REGION=us-east-1
S3_BUCKET_NAME=not_needed_for_local_testing
```

## Detailed Configuration

### 1. PostgreSQL Configuration (Required)

**If using Docker Compose (Recommended):**
```bash
POSTGRES_HOST=localhost          # Use 'localhost' when running agents locally
POSTGRES_PORT=5432              # Default PostgreSQL port
POSTGRES_DB=documents_db        # Database name (must match docker-compose.yml)
POSTGRES_USER=postgres          # Default user (must match docker-compose.yml)
POSTGRES_PASSWORD=postgres      # Default password (must match docker-compose.yml)
```

**If using existing PostgreSQL installation:**
```bash
POSTGRES_HOST=localhost         # Or your PostgreSQL server IP
POSTGRES_PORT=5432             # Or your custom port
POSTGRES_DB=documents_db       # Your database name
POSTGRES_USER=your_username    # Your PostgreSQL username
POSTGRES_PASSWORD=your_password # Your PostgreSQL password
```

### 2. AWS Configuration (Required only if using S3)

**How to get AWS credentials:**

1. Log in to AWS Console: https://console.aws.amazon.com/
2. Go to IAM → Users → Your User → Security Credentials
3. Create Access Key → Choose "Application running outside AWS"
4. Copy the Access Key ID and Secret Access Key

```bash
AWS_ACCESS_KEY_ID=AKIA...              # Your AWS Access Key (starts with AKIA)
AWS_SECRET_ACCESS_KEY=your_secret_key   # Your AWS Secret Key
AWS_REGION=us-east-1                   # Your S3 bucket region (e.g., us-east-1, eu-west-1)
S3_BUCKET_NAME=your-bucket-name        # Your S3 bucket name
```

**Required IAM Permissions:**
Your AWS user needs these S3 permissions:
- `s3:GetObject`
- `s3:PutObject`
- `s3:ListBucket`

### 3. Agent Configuration (Usually keep defaults)

```bash
ORCHESTRATOR_HOST=localhost
ORCHESTRATOR_PORT=8001
EXTRACTOR_HOST=localhost
EXTRACTOR_PORT=8002
VALIDATOR_HOST=localhost
VALIDATOR_PORT=8003
ARCHIVIST_HOST=localhost
ARCHIVIST_PORT=8004
```

**Only change these if:**
- Running on a different machine/server (change localhost to IP)
- Port conflicts with other services (change port numbers)

### 4. Logging Configuration

```bash
LOG_LEVEL=INFO  # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
```

## Testing Without AWS/S3

If you want to test without S3, you can:

1. Use placeholder AWS values (the agents will still start)
2. Only test endpoints that don't require S3:
   - `discover_agents` - Works without S3
   - `get_agent_registry` - Works without S3
   - `validate_document` - Works without S3 (if you pass document data directly)

3. Skip the Extractor agent tests (this one needs S3)

## Security Notes

⚠️ **IMPORTANT:**
- Never commit `.env` to git (it's already in .gitignore)
- Don't share AWS credentials
- Use different credentials for production
- Consider using AWS IAM roles instead of access keys in production
